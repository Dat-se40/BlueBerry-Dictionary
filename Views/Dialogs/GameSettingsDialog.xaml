<Window x:Class="BlueBerryDictionary.Views.Dialogs.GameSettingsDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Game Settings"
        Width="700"
        Height="500"
        WindowStartupLocation="CenterOwner"
        ResizeMode="NoResize"
        Background="{DynamicResource MainBackground}">

    <Window.Resources>
        <Style x:Key="PrimaryButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="{DynamicResource ToolButtonActive}" />
            <Setter Property="Foreground" Value="White" />
            <Setter Property="BorderThickness" Value="0" />
            <Setter Property="Padding" Value="20,12" />
            <Setter Property="FontWeight" Value="SemiBold" />
            <Setter Property="Cursor" Value="Hand" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}"
                                CornerRadius="12"
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Opacity" Value="0.9" />
                </Trigger>
            </Style.Triggers>
        </Style>

        <Style x:Key="SecondaryButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="{DynamicResource SearchBackground}" />
            <Setter Property="Foreground" Value="{DynamicResource ButtonColor}" />
            <Setter Property="BorderBrush" Value="{DynamicResource BorderColor}" />
            <Setter Property="BorderThickness" Value="2" />
            <Setter Property="Padding" Value="20,12" />
            <Setter Property="FontWeight" Value="SemiBold" />
            <Setter Property="Cursor" Value="Hand" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="12"
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="{DynamicResource WordItemHover}" />
                </Trigger>
            </Style.Triggers>
        </Style>

        <Style x:Key="DropdownButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="{DynamicResource SearchBackground}" />
            <Setter Property="Foreground" Value="{DynamicResource TextColor}" />
            <Setter Property="BorderBrush" Value="{DynamicResource BorderColor}" />
            <Setter Property="BorderThickness" Value="2" />
            <Setter Property="Padding" Value="15,10" />
            <Setter Property="FontSize" Value="14" />
            <Setter Property="HorizontalContentAlignment" Value="Left" />
            <Setter Property="Cursor" Value="Hand" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="12"
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                              VerticalAlignment="Center" />
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="{DynamicResource WordItemHover}" />
                </Trigger>
            </Style.Triggers>
        </Style>

        <Style x:Key="PopupItemStyle" TargetType="Button">
            <Setter Property="Background" Value="Transparent" />
            <Setter Property="Foreground" Value="{DynamicResource TextColor}" />
            <Setter Property="BorderThickness" Value="0" />
            <Setter Property="Padding" Value="15,10" />
            <Setter Property="Margin" Value="0" />
            <Setter Property="FontSize" Value="14" />
            <Setter Property="HorizontalContentAlignment" Value="Left" />
            <Setter Property="Cursor" Value="Hand" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" />
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="{DynamicResource WordItemHover}" />
                </Trigger>
            </Style.Triggers>
        </Style>

        <Style x:Key="PopupItemFirstStyle" TargetType="Button" BasedOn="{StaticResource PopupItemStyle}">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}"
                                CornerRadius="12,12,0,0"
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" />
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="PopupItemLastStyle" TargetType="Button" BasedOn="{StaticResource PopupItemStyle}">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}"
                                CornerRadius="0,0,10,10"
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" />
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>

    <Border Background="{DynamicResource CardBackground}"
            BorderBrush="{DynamicResource BorderColor}"
            BorderThickness="2"
            CornerRadius="20"
            Padding="35"
            Margin="20">
        <StackPanel>
            <TextBlock Text="âš™ï¸ CÃ i Ä‘áº·t trÃ² chÆ¡i"
                       FontSize="28"
                       FontWeight="Bold"
                       Foreground="{DynamicResource TextColor}"
                       Margin="0,0,0,10" />
            <TextBlock Text="TÃ¹y chá»‰nh tráº£i nghiá»‡m há»c táº­p cá»§a báº¡n"
                       FontSize="14"
                       Foreground="{DynamicResource TextColor}"
                       Opacity="0.7"
                       Margin="0,0,0,30" />

            <!-- Data Source Selection -->
            <TextBlock Text="ðŸ“š Nguá»“n tá»« vá»±ng"
                       FontSize="16"
                       FontWeight="SemiBold"
                       Foreground="{DynamicResource TextColor}"
                       Margin="0,0,0,15" />

            <Grid x:Name="DataSourceSelector" Margin="0,0,0,10">
                <Button x:Name="BtnDataSource"
                        Style="{StaticResource DropdownButtonStyle}"
                        Click="BtnDataSource_Click">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>
                        <TextBlock x:Name="TxtSelectedSource" Text="ðŸ“š All Words" Grid.Column="0" />
                        <Path Grid.Column="1"
                              Data="M 0 0 L 4 4 L 8 0"
                              Stroke="{DynamicResource TextColor}"
                              StrokeThickness="1.5"
                              Margin="10,0,0,0"
                              VerticalAlignment="Center" />
                    </Grid>
                </Button>

                <Popup x:Name="PopupDataSource"
                       PlacementTarget="{Binding ElementName=BtnDataSource}"
                       Placement="Bottom"
                       StaysOpen="False"
                       AllowsTransparency="True">
                    <Border Background="{DynamicResource SearchBackground}"
                            BorderBrush="{DynamicResource BorderColor}"
                            BorderThickness="2"
                            CornerRadius="12"
                            Margin="0,2,0,0"
                            Padding="0"
                            ClipToBounds="True">
                        <StackPanel x:Name="DataSourceOptions" />
                    </Border>
                </Popup>
            </Grid>

            <TextBlock x:Name="TxtAvailableCards"
                       Text="0 tá»« kháº£ dá»¥ng"
                       FontSize="12"
                       Foreground="{DynamicResource TextColor}"
                       Opacity="0.7"
                       Margin="0,0,0,25" />

            <!-- Card Count -->
            <TextBlock Text="ðŸŽ´ Sá»‘ tháº»"
                       FontSize="16"
                       FontWeight="SemiBold"
                       Foreground="{DynamicResource TextColor}"
                       Margin="0,0,0,15" />

            <Grid x:Name="CardCountSelector" Margin="0,0,0,25">
                <Button x:Name="BtnCardCount"
                        Style="{StaticResource DropdownButtonStyle}"
                        Click="BtnCardCount_Click">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>
                        <TextBlock x:Name="TxtSelectedCount" Text="10 tháº»" Grid.Column="0" />
                        <Path Grid.Column="1"
                              Data="M 0 0 L 4 4 L 8 0"
                              Stroke="{DynamicResource TextColor}"
                              StrokeThickness="1.5"
                              Margin="10,0,0,0"
                              VerticalAlignment="Center" />
                    </Grid>
                </Button>

                <Popup x:Name="PopupCardCount"
                       PlacementTarget="{Binding ElementName=BtnCardCount}"
                       Placement="Bottom"
                       StaysOpen="False"
                       AllowsTransparency="True">
                    <Border Background="{DynamicResource SearchBackground}"
                            BorderBrush="{DynamicResource BorderColor}"
                            BorderThickness="2"
                            CornerRadius="12"
                            Margin="0,2,0,0"
                            Padding="0"
                            ClipToBounds="True">
                        <StackPanel Margin="0">
                            <Button Content="5 tháº»" Click="CardCountOption_Click" Tag="5"
                                    Style="{StaticResource PopupItemFirstStyle}" />
                            <Button Content="10 tháº»" Click="CardCountOption_Click" Tag="10"
                                    Style="{StaticResource PopupItemStyle}" />
                            <Button Content="15 tháº»" Click="CardCountOption_Click" Tag="15"
                                    Style="{StaticResource PopupItemStyle}" />
                            <Button Content="20 tháº»" Click="CardCountOption_Click" Tag="20"
                                    Style="{StaticResource PopupItemStyle}" />
                            <Button Content="30 tháº»" Click="CardCountOption_Click" Tag="30"
                                    Style="{StaticResource PopupItemLastStyle}" />
                        </StackPanel>
                    </Border>
                </Popup>
            </Grid>

            <!-- Actions -->
            <UniformGrid Columns="2" Rows="1">
                <Button Content="â—€ Há»§y"
                        Style="{StaticResource SecondaryButtonStyle}"
                        Margin="0,0,7,0"
                        Click="Cancel_Click" />
                <Button Content="â–¶ Báº¯t Ä‘áº§u chÆ¡i"
                        Style="{StaticResource PrimaryButtonStyle}"
                        Margin="7,0,0,0"
                        Click="Start_Click" />
            </UniformGrid>
        </StackPanel>
    </Border>
</Window>